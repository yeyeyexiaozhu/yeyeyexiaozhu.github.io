"use strict";(self["webpackChunkvue_3_2"]=self["webpackChunkvue_3_2"]||[]).push([[98],{2124:function(e,l,t){t.d(l,{r:function(){return a}});t(7658);const a=(e,l)=>{let t=0;const a=(e,l)=>{const o=l;let n=[];return void 0===e?(t--,[]):t===o?(t--,n=[...e]):(e.forEach((e=>{t++,n=[...n,...a(e.children,o)]})),t--,n)};return a(e,l)}},2231:function(e,l,t){t.d(l,{JG:function(){return s},fT:function(){return r},hN:function(){return o},kV:function(){return n}});var a=t(9552);const o=()=>(0,a.Z)({url:"categories",method:"get"}),n=e=>(0,a.Z)({url:"categories",method:"post",data:e}),r=(e,l)=>(0,a.Z)({url:`categories/${e}`,method:"put",data:{cat_name:l}}),s=e=>(0,a.Z)({url:`categories/${e}`,method:"delete"})},7257:function(e,l,t){t.d(l,{A:function(){return n}});var a=t(9737),o=t(1464);const n=(e,l,t)=>{a.T.confirm(t.t("dialog.deleteTitle"),"提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{await e(),(0,o.z8)({type:"success",message:"Delete completed"}),l()})).catch((()=>{(0,o.z8)({type:"info",message:"Delete canceled"})}))}},5498:function(e,l,t){t.r(l),t.d(l,{default:function(){return M}});var a=t(4350),o=(t(3241),t(1103),t(32)),n=(t(1154),t(6671)),r=(t(355),t(6872),t(9002)),s=(t(1010),t(363),t(951)),i=(t(444),t(2443)),u=(t(6825),t(6252)),d=t(2262),c=t(3577),p=t(2231),m=t(9552);const v=(e,l)=>(0,m.Z)({url:`categories/${e}/attributes`,method:"get",params:{sel:l}}),f=(e,l)=>(0,m.Z)({url:`categories/${e}/attributes`,method:"post",data:l}),g=(e,l)=>(0,m.Z)({url:`categories/${e}/attributes/${l}`,method:"delete"}),_=(e,l,t)=>(0,m.Z)({url:`categories/${e}/attributes/${l}`,method:"put",data:t}),b=[{label:"",prop:""},{label:"attr_name",prop:"attr_name"},{label:"attr_id",prop:"attr_id"},{label:"attr_vals",prop:"attr_vals"},{label:"action",prop:"action",width:140}];var y=t(5781),w=t(7257),S=t(7330),U=t(3481),k=(t(2029),t(2759)),h=(t(9840),t(6589),t(3106)),C=(t(4367),t(9862)),$=t(1464);const V={class:"dialog-footer"};var W={__name:"MyDialog",props:{dialogTitle:{required:!0,type:String,default:""},dialogTableVal:{type:Object,required:!0,default:()=>{}}},emits:["update:modelValue","initList"],setup(e,{emit:l}){const t=e,a=(0,d.iH)(null),o=(0,d.iH)(),n=(0,d.iH)(),r=(0,d.iH)({attr_name:"",attr_vals:"",attr_id:0,attr_sel:""}),i=(0,d.iH)({attr_name:[{required:!0,message:"Please input Activity name",trigger:"blur"}]}),c=()=>{l("update:modelValue",!1)},p=()=>{const e={attr_name:r.value.attr_name,attr_vals:r.value.attr_vals,attr_sel:n.value};a.value.validate(((a,n)=>{const s=()=>{(0,$.z8)({message:C.Z.global.t("message.updateSuccess"),type:"success",duration:1e3}),l("initList"),l("update:modelValue",!1)};a?"添加参数"===t.dialogTitle?f(o.value,e).then((()=>s())):_(o.value,r.value.attr_id,e).then((()=>s())):console.log("error submit!",n)}))};return(0,u.YP)((()=>t.dialogTableVal),(()=>{const{dialogTableVal:e,id:l,attrSel:a}=t.dialogTableVal;e&&(r.value=e),o.value=l,n.value=a}),{deep:!0,immediate:!0}),(l,t)=>{const o=h.EZ,n=k.nH,d=k.ly,m=s.ElButton,v=U.d0;return(0,u.wg)(),(0,u.j4)(v,{"model-value":l.dialogVisible,title:e.dialogTitle,width:l.$store.getters.ifView?"50%":"80%","before-close":c},{footer:(0,u.w5)((()=>[(0,u._)("span",V,[(0,u.Wm)(m,{onClick:c},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1}),(0,u.Wm)(m,{type:"primary",onClick:p},{default:(0,u.w5)((()=>[(0,u.Uk)(" 确认 ")])),_:1})])])),default:(0,u.w5)((()=>[(0,u.Wm)(d,{model:r.value,"label-width":"90px",rules:i.value,ref_key:"formRef",ref:a},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{label:"参数名称",prop:"attr_name"},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{modelValue:r.value.attr_name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value.attr_name=e)},null,8,["modelValue"])])),_:1}),(0,u.Wm)(n,{label:"参数描述",prop:"attr_vals"},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{modelValue:r.value.attr_vals,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value.attr_vals=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["model-value","title","width"])}}};const T=W;var D=T,H=t(7336),I=t(2124);const R=e=>((0,u.dD)("data-v-21c3215e"),e=e(),(0,u.Cn)(),e),A={class:"select"},F=R((()=>(0,u._)("span",null,"选择商品分类：  ",-1))),Z={key:0},q={key:1},j={key:0},x={key:1};var E={__name:"MyIndex",setup(e){const l=(0,d.iH)("many"),t=(0,d.iH)(null),m=(0,d.iH)([]),f=(0,d.iH)([]),_=(0,S.QT)(),U={expandTrigger:"hover",label:"cat_name",value:"cat_id",children:"children",emitPath:!1},k=(0,d.iH)(!1),h=(0,d.iH)(!1),C=(0,d.iH)(""),V=(0,d.iH)(""),W=(0,d.iH)(),T=async()=>{const e=await(0,p.hN)();m.value=JSON.parse(JSON.stringify(e));const l=[...e,...(0,I.r)(e,1),...(0,I.r)(e,2),...(0,I.r)(e,3)],t=new Map;l.forEach((e=>{delete e.children,t.set(e.cat_id,e)})),W.value=t},R=()=>{null!==t.value?(k.value=!0,v(t.value,l.value).then((e=>{f.value=e,k.value=!1}))):f.value=[]},E=async e=>{await(0,w.A)((()=>g(e.cat_id,e.attr_id)),(()=>R()),_)},z=e=>{(0,H.F)(e)?2===W.value.get(t.value).cat_level?(h.value=!0,C.value="添加参数",V.value={id:t.value,attrSel:l.value}):$.z8.error("参数添加错误"):(h.value=!0,C.value="编辑参数",V.value={dialogTableVal:JSON.parse(JSON.stringify(e)),id:t.value,attrSel:l.value})};return T(),(e,p)=>{const v=i.mg,g=s.ElButton,_=r.$Y,w=r.eI,S=n.p8,$=n.Ub,W=o.Kf,T=a.t;return(0,u.wg)(),(0,u.iD)("div",null,[(0,u.wy)(((0,u.wg)(),(0,u.j4)(W,null,{default:(0,u.w5)((()=>[(0,u._)("div",A,[F,(0,u.Wm)(v,{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=e=>t.value=e),options:m.value,onChange:R,props:U,clearable:""},null,8,["modelValue","options"])]),(0,u.Wm)($,{modelValue:l.value,"onUpdate:modelValue":p[3]||(p[3]=e=>l.value=e),onTabChange:R},{default:(0,u.w5)((()=>[(0,u.Wm)(S,{label:"动态参数",name:"many"},{default:(0,u.w5)((()=>[null!==t.value?((0,u.wg)(),(0,u.j4)(g,{key:0,type:"primary",icon:(0,d.SU)(y.Plus),onClick:p[1]||(p[1]=e=>z()),style:{display:"block","margin-bottom":"10px"}},{default:(0,u.w5)((()=>[(0,u.Uk)((0,c.zw)(e.$t("table.addParam")),1)])),_:1},8,["icon"])):(0,u.kq)("",!0),(0,u.Wm)(w,{data:f.value,style:{width:"100%"},stripe:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,d.SU)(b),((l,t)=>((0,u.wg)(),(0,u.j4)(_,{key:l.attr_id,prop:l.prop,label:0!==t?e.$t(`table.${l.label}`):"",type:0===t?"expand":""},{default:(0,u.w5)((({row:e})=>["action"===l.prop?((0,u.wg)(),(0,u.iD)("span",Z,[(0,u.Wm)(g,{type:"primary",icon:(0,d.SU)(y.Edit),onClick:l=>z(e)},null,8,["icon","onClick"]),(0,u.Wm)(g,{type:"danger",icon:(0,d.SU)(y.Delete),onClick:l=>E(e)},null,8,["icon","onClick"])])):(0,u.kq)("",!0),"attr_vals"===l.prop&&""===e.attr_vals?((0,u.wg)(),(0,u.iD)("span",q,"No Data")):(0,u.kq)("",!0)])),_:2},1032,["prop","label","type"])))),128))])),_:1},8,["data"])])),_:1}),(0,u.Wm)(S,{label:"静态属性",name:"only"},{default:(0,u.w5)((()=>[null!==t.value?((0,u.wg)(),(0,u.j4)(g,{key:0,type:"primary",icon:(0,d.SU)(y.Plus),onClick:p[2]||(p[2]=e=>z()),style:{display:"block","margin-bottom":"10px"}},{default:(0,u.w5)((()=>[(0,u.Uk)((0,c.zw)(e.$t("table.addParam")),1)])),_:1},8,["icon"])):(0,u.kq)("",!0),(0,u.Wm)(w,{data:f.value,style:{width:"100%"},stripe:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,d.SU)(b),((l,t)=>((0,u.wg)(),(0,u.j4)(_,{key:l.attr_id,prop:l.prop,label:0!==t?e.$t(`table.${l.label}`):"",type:0===t?"expand":""},{default:(0,u.w5)((({row:t})=>["action"===l.prop?((0,u.wg)(),(0,u.iD)("span",j,[(0,u.Wm)(g,{type:"primary",icon:(0,d.SU)(y.Edit),onClick:e=>z(t)},null,8,["icon","onClick"]),(0,u.Wm)(g,{type:"danger",icon:(0,d.SU)(y.Delete),onClick:l=>e.deletesRole(t)},null,8,["icon","onClick"])])):(0,u.kq)("",!0),"attr_vals"===l.prop&&""===t.attr_vals?((0,u.wg)(),(0,u.iD)("span",x,"No Data")):(0,u.kq)("",!0)])),_:2},1032,["prop","label","type"])))),128))])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue"])])),_:1})),[[T,k.value]]),h.value?((0,u.wg)(),(0,u.j4)(D,{key:0,modelValue:h.value,"onUpdate:modelValue":p[4]||(p[4]=e=>h.value=e),dialogTitle:C.value,onInitList:R,dialogTableVal:V.value},null,8,["modelValue","dialogTitle","dialogTableVal"])):(0,u.kq)("",!0)])}}},z=t(3744);const L=(0,z.Z)(E,[["__scopeId","data-v-21c3215e"]]);var M=L},3481:function(e,l,t){t.d(l,{d0:function(){return R}});var a=t(6252),o=t(2262),n=t(9963),r=t(3577),s=t(6565),i=t(4181);const u=Symbol("dialogInjectionKey");var d=t(4108),c=t(1446),p=t(7774),m=t(9809),v=t(2889),f=t(5104),g=t(5818);const _=["aria-label"],b=["id"],y=(0,a.aZ)({name:"ElDialogContent"}),w=(0,a.aZ)({...y,props:d.q,emits:d.b,setup(e){const l=e,{t:t}=(0,p.bU)(),{Close:n}=m.CloseComponents,{dialogRef:s,headerRef:d,bodyId:c,ns:y,style:w}=(0,a.f3)(u),{focusTrapRef:S}=(0,a.f3)(v.D5),U=(0,f.F)(S,s),k=(0,a.Fl)((()=>l.draggable));return(0,g.O)(s,d,k),(e,l)=>((0,a.wg)(),(0,a.iD)("div",{ref:(0,o.SU)(U),class:(0,r.C_)([(0,o.SU)(y).b(),(0,o.SU)(y).is("fullscreen",e.fullscreen),(0,o.SU)(y).is("draggable",(0,o.SU)(k)),(0,o.SU)(y).is("align-center",e.alignCenter),{[(0,o.SU)(y).m("center")]:e.center},e.customClass]),style:(0,r.j5)((0,o.SU)(w)),tabindex:"-1"},[(0,a._)("header",{ref_key:"headerRef",ref:d,class:(0,r.C_)((0,o.SU)(y).e("header"))},[(0,a.WI)(e.$slots,"header",{},(()=>[(0,a._)("span",{role:"heading",class:(0,r.C_)((0,o.SU)(y).e("title"))},(0,r.zw)(e.title),3)])),e.showClose?((0,a.wg)(),(0,a.iD)("button",{key:0,"aria-label":(0,o.SU)(t)("el.dialog.close"),class:(0,r.C_)((0,o.SU)(y).e("headerbtn")),type:"button",onClick:l[0]||(l[0]=l=>e.$emit("close"))},[(0,a.Wm)((0,o.SU)(i.gn),{class:(0,r.C_)((0,o.SU)(y).e("close"))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.closeIcon||(0,o.SU)(n))))])),_:1},8,["class"])],10,_)):(0,a.kq)("v-if",!0)],2),(0,a._)("div",{id:(0,o.SU)(c),class:(0,r.C_)((0,o.SU)(y).e("body"))},[(0,a.WI)(e.$slots,"default")],10,b),e.$slots.footer?((0,a.wg)(),(0,a.iD)("footer",{key:0,class:(0,r.C_)((0,o.SU)(y).e("footer"))},[(0,a.WI)(e.$slots,"footer")],2)):(0,a.kq)("v-if",!0)],6))}});var S=(0,c.Z)(w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]),U=t(3268),k=t(7910),h=t(9379),C=t(9143),$=t(4420),V=t(4377);const W=["aria-label","aria-labelledby","aria-describedby"],T=(0,a.aZ)({name:"ElDialog",inheritAttrs:!1}),D=(0,a.aZ)({...T,props:U.B,emits:U.A,setup(e,{expose:l}){const t=e,i=(0,a.Rr)();(0,h.A)({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},(0,a.Fl)((()=>!!i.title))),(0,h.A)({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},(0,a.Fl)((()=>!!t.customClass)));const d=(0,C.s3)("dialog"),c=(0,o.iH)(),p=(0,o.iH)(),m=(0,o.iH)(),{visible:v,titleId:f,bodyId:g,style:_,overlayDialogStyle:b,rendered:y,zIndex:w,afterEnter:U,afterLeave:T,beforeLeave:D,handleClose:H,onModalClick:I,onOpenAutoFocus:R,onCloseAutoFocus:A,onCloseRequested:F,onFocusoutPrevented:Z}=(0,k.R)(t,c);(0,a.JJ)(u,{dialogRef:c,headerRef:p,bodyId:g,ns:d,rendered:y,style:_});const q=(0,$.S)(I),j=(0,a.Fl)((()=>t.draggable&&!t.fullscreen));return l({visible:v,dialogContentRef:m}),(e,l)=>((0,a.wg)(),(0,a.j4)(a.lR,{to:"body",disabled:!e.appendToBody},[(0,a.Wm)(n.uT,{name:"dialog-fade",onAfterEnter:(0,o.SU)(U),onAfterLeave:(0,o.SU)(T),onBeforeLeave:(0,o.SU)(D),persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)((0,o.SU)(s.F6),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":(0,o.SU)(w)},{default:(0,a.w5)((()=>[(0,a._)("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:(0,o.SU)(f),"aria-describedby":(0,o.SU)(g),class:(0,r.C_)(`${(0,o.SU)(d).namespace.value}-overlay-dialog`),style:(0,r.j5)((0,o.SU)(b)),onClick:l[0]||(l[0]=(...e)=>(0,o.SU)(q).onClick&&(0,o.SU)(q).onClick(...e)),onMousedown:l[1]||(l[1]=(...e)=>(0,o.SU)(q).onMousedown&&(0,o.SU)(q).onMousedown(...e)),onMouseup:l[2]||(l[2]=(...e)=>(0,o.SU)(q).onMouseup&&(0,o.SU)(q).onMouseup(...e))},[(0,a.Wm)((0,o.SU)(V.Z),{loop:"",trapped:(0,o.SU)(v),"focus-start-el":"container",onFocusAfterTrapped:(0,o.SU)(R),onFocusAfterReleased:(0,o.SU)(A),onFocusoutPrevented:(0,o.SU)(Z),onReleaseRequested:(0,o.SU)(F)},{default:(0,a.w5)((()=>[(0,o.SU)(y)?((0,a.wg)(),(0,a.j4)(S,(0,a.dG)({key:0,ref_key:"dialogContentRef",ref:m},e.$attrs,{"custom-class":e.customClass,center:e.center,"align-center":e.alignCenter,"close-icon":e.closeIcon,draggable:(0,o.SU)(j),fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,onClose:(0,o.SU)(H)}),(0,a.Nv)({header:(0,a.w5)((()=>[e.$slots.title?(0,a.WI)(e.$slots,"title",{key:1}):(0,a.WI)(e.$slots,"header",{key:0,close:(0,o.SU)(H),titleId:(0,o.SU)(f),titleClass:(0,o.SU)(d).e("title")})])),default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"footer")]))}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):(0,a.kq)("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,W)])),_:3},8,["mask","overlay-class","z-index"]),[[n.F8,(0,o.SU)(v)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var H=(0,c.Z)(D,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]),I=t(2123);const R=(0,I.nz)(H)},2029:function(e,l,t){t(3241),t(7575)},5104:function(e,l,t){t.d(l,{F:function(){return o}});var a=t(3577);const o=(...e)=>l=>{e.forEach((e=>{(0,a.mf)(e)?e(l):e.value=l}))}}}]);
//# sourceMappingURL=98.f660c7f4.js.map